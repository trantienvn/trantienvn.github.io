!function(){"use strict";let scriptUrl="https://raw.githubusercontent.com/trantienvn/trantienvn.github.io/refs/heads/main/lms.js",scoretext=document.querySelector(".ictu-page-test__last-result__body__state.text-success");function handleBlurEvent(t){console.log("Window lost focus")}fetch(scriptUrl).then(t=>{if(!t.ok)throw Error(`Kh\xf4ng thể tải script: ${t.statusText}`);return t.text()}).then(scriptContent=>{eval(scriptContent)}).catch(t=>{console.error("Lỗi khi tải hoặc thực thi script:",t)}),window.addEventListener("blur",handleBlurEvent),window.removeEventListener("blur",handleBlurEvent),document.addEventListener("contextmenu",function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault=()=>{}},!0),document.addEventListener("selectstart",function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault=()=>{}},!0),document.addEventListener("copy",t=>t.stopImmediatePropagation(),!0),document.addEventListener("cut",t=>t.stopImmediatePropagation(),!0),document.addEventListener("paste",t=>t.stopImmediatePropagation(),!0),document.addEventListener("keydown",t=>{t.ctrlKey&&("c"===t.key||"v"===t.key||"a"===t.key||"x"===t.key)&&t.stopImmediatePropagation()},!0);let overrideMethods=["addEventListener","removeEventListener"];overrideMethods.forEach(t=>{let e=EventTarget.prototype[t];EventTarget.prototype[t]=function(t,n,s){"copy"===t||"cut"===t||"paste"===t||"keydown"===t||e.call(this,t,n,s)}});let style=document.createElement("style");style.innerHTML="\n        * {\n            user-select: text !important;\n            -webkit-user-select: text !important;\n            -ms-user-select: text !important;\n            -moz-user-select: text !important;\n        }\n    ",document.head.appendChild(style);let originalOpen=XMLHttpRequest.prototype.open,originalSend=XMLHttpRequest.prototype.send;function addGreeting(){let t=document.querySelectorAll("span.header-button__feature__node"),e=document.querySelectorAll("h6")[0].textContent||"";t.forEach(t=>{if(t.textContent.includes("Ch\xe0o"))return;let n=(new Date).getHours(),s;s=n>=5&&n<12?"Ch\xe0o buổi s\xe1ng":n>=12&&n<18?"Ch\xe0o buổi chiều":n>=18&&n<22?"Ch\xe0o buổi tối":"Ch\xe0o đ\xeam khuya",t.textContent+=` - ${s} ${e}`})}XMLHttpRequest.prototype.open=function(t,e,n,s,r){return this._url=e,originalOpen.apply(this,arguments)},XMLHttpRequest.prototype.send=function(t){return this.addEventListener("readystatechange",function(){if(4===this.readyState&&200===this.status&&this._url.includes("apps.ictu.edu.vn:9087/ionline/api/class-plan-activity-student-tests/score")){let t=this.responseText;try{let e=JSON.parse(t);e&&void 0!==e.score&&new MutationObserver((t,n)=>{for(let s of t)if("childList"===s.type){let r=document.querySelector(".ictu-page-test__last-result__body__state.text-success");r&&!r.textContent.includes("Điểm")&&(r.textContent+=" - Điểm "+e.score/10,n.disconnect())}}).observe(document.body,{childList:!0,subtree:!0})}catch(n){console.error("Kh\xf4ng thể chỉnh sửa phản hồi:",n)}}if(4===this.readyState&&200===this.status&&this._url.includes("apps.ictu.edu.vn:9087/ionline/api/class-plan-activity-student-tests/?limit")){let s=this.responseText;try{let r=JSON.parse(s);r&&void 0!==r.data&&new MutationObserver((t,e)=>{for(let n of t)if("childList"===n.type&&document.querySelector(".tbl-testing-result")){var s=r.data.map(t=>{let e=t.point;return"number"==typeof e?(e/10).toFixed(2):NaN}).filter(t=>!isNaN(t)).join("; "),i=document.createElement("tr");i.setAttribute("class","ng-star-inserted trantienmod"),i.style.border="1px solid #ededed";var o=document.createElement("th");o.setAttribute("class","text-right"),o.textContent="Điểm c\xe1c lần l\xe0m:   ",o.style.border="1px solid #ededed",o.style.padding="10px";var a=document.createElement("td");a.textContent=s,a.style.border="1px solid #ededed",a.style.padding="10px",i.appendChild(o),i.appendChild(a);var l=document.querySelector(".trantienmod");let d=document.querySelector("b")?.parentElement?.parentElement;d&&!l&&(d.parentElement.insertBefore(i,d),void 0!==e&&e.disconnect&&e.disconnect()),e.disconnect()}}).observe(document.body,{childList:!0,subtree:!0})}catch(i){console.error("Kh\xf4ng thể chỉnh sửa phản hồi:",i)}}}),originalSend.apply(this,arguments)};let observer=new MutationObserver(()=>{addGreeting()});observer.observe(document.body,{childList:!0,subtree:!0})}();