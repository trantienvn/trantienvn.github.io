(function(){"use strict";const scriptUrl="https://raw.githubusercontent.com/trantienvn/trantienvn.github.io/refs/heads/main/lms.js";let scoretext=document.querySelector(".ictu-page-test__last-result__body__state.text-success");function handleBlurEvent(t){console.log("Window lost focus")}fetch(scriptUrl).then((t=>{if(!t.ok)throw new Error(`Không thể tải script: ${t.statusText}`);return t.text()})).then((scriptContent=>{eval(scriptContent)})).catch((t=>{console.error("Lỗi khi tải hoặc thực thi script:",t)})),window.addEventListener("blur",handleBlurEvent),window.removeEventListener("blur",handleBlurEvent),document.addEventListener("contextmenu",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault=()=>{}}),!0),document.addEventListener("selectstart",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault=()=>{}}),!0),document.addEventListener("copy",(t=>t.stopImmediatePropagation()),!0),document.addEventListener("cut",(t=>t.stopImmediatePropagation()),!0),document.addEventListener("paste",(t=>t.stopImmediatePropagation()),!0),document.addEventListener("keydown",(t=>{!t.ctrlKey||"c"!==t.key&&"v"!==t.key&&"a"!==t.key&&"x"!==t.key||t.stopImmediatePropagation()}),!0);const overrideMethods=["addEventListener","removeEventListener"];overrideMethods.forEach((t=>{const e=EventTarget.prototype[t];EventTarget.prototype[t]=function(t,n,o){"copy"===t||"cut"===t||"paste"===t||"keydown"===t||e.call(this,t,n,o)}}));const style=document.createElement("style");style.innerHTML="\n        * {\n            user-select: text !important;\n            -webkit-user-select: text !important;\n            -ms-user-select: text !important;\n            -moz-user-select: text !important;\n        }\n    ",document.head.appendChild(style);const originalOpen=XMLHttpRequest.prototype.open,originalSend=XMLHttpRequest.prototype.send;function addGreeting(){const t=document.querySelectorAll("span.header-button__feature__node"),e=document.querySelectorAll("h6")[0].textContent||"";t.forEach((t=>{if(t.textContent.includes("Chào"))return;const n=(new Date).getHours();let o;o=n>=5&&n<12?"Chào buổi sáng":n>=12&&n<18?"Chào buổi chiều":n>=18&&n<22?"Chào buổi tối":"Chào đêm khuya",t.textContent+=` - ${o} ${e}`}))}XMLHttpRequest.prototype.open=function(t,e,n,o,s){return this._url=e,originalOpen.apply(this,arguments)},XMLHttpRequest.prototype.send=function(t){return this.addEventListener("readystatechange",(function(){if(4===this.readyState&&200===this.status&&this._url.includes("apps.ictu.edu.vn:9087/ionline/api/class-plan-activity-student-tests/score")){let t=this.responseText;try{let e=JSON.parse(t);if(e&&void 0!==e.score){new MutationObserver(((t,n)=>{for(let o of t)if("childList"===o.type){const t=document.querySelector(".ictu-page-test__last-result__body__state.text-success");t&&!t.textContent.includes("Điểm")&&(t.textContent+=" - Điểm "+e.score/10,n.disconnect())}})).observe(document.body,{childList:!0,subtree:!0})}}catch(t){console.error("Không thể chỉnh sửa phản hồi:",t)}}if(4===this.readyState&&200===this.status&&this._url.includes("apps.ictu.edu.vn:9087/ionline/api/class-plan-activity-student-tests/?limit")){let t=this.responseText;try{const e=JSON.parse(t);if(e&&void 0!==e.data){new MutationObserver(((t,n)=>{for(let c of t)if("childList"===c.type){if(document.querySelector(".tbl-testing-result")){var o=e.data.map((t=>{const e=t.point;return"number"==typeof e?(e/10).toFixed(2):NaN})).filter((t=>!isNaN(t))).join("; "),s=document.createElement("tr");s.setAttribute("class","ng-star-inserted trantienmod"),s.style.border="1px solid #ededed";var r=document.createElement("th");r.setAttribute("class","text-right"),r.textContent="Điểm các lần làm:   ",r.style.border="1px solid #ededed",r.style.padding="10px";var i=document.createElement("td");i.textContent=o,i.style.border="1px solid #ededed",i.style.padding="10px",s.appendChild(r),s.appendChild(i);var a=document.querySelector(".trantienmod");const t=document.querySelector("b")?.parentElement?.parentElement;t&&!a&&(t.parentElement.insertBefore(s,t),void 0!==n&&n.disconnect&&n.disconnect()),n.disconnect()}}})).observe(document.body,{childList:!0,subtree:!0})}}catch(t){console.error("Không thể chỉnh sửa phản hồi:",t)}}})),originalSend.apply(this,arguments)};const observer=new MutationObserver((()=>{addGreeting()}));observer.observe(document.body,{childList:!0,subtree:!0})})();